<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{{ scenario_dict["name"] }} - {{ scene_dict["name"] }}</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
  </head>

  <body>
    <div id="scene-root">
      <a-scene>
        <a-assets timeout="50000">
          {% for object in scene_dict["objects"] %}
          <!--  TODO: deal with multiple objects of same asset type  -->
          <a-asset-item
            id="{{ object['asset_id'] }}-asset-src"
            src="{{ asset_prefix_url }}{{ object['asset_details']['s3_key'] }}"
          ></a-asset-item>
          {% end %}
        </a-assets>
        <a-entity environment="preset: forest; dressingAmount: 500"></a-entity>
        <a-entity
          id="camera"
          camera
          look-controls
          wasd-controls
          position="0 3 3"
        >
          <!--    TODO: use scene's camera properties instead    -->
        </a-entity>
        <a-entity
          geometry="primitive: plane; width: 4; height: auto"
          position="0 3 -2"
          material="color: blue"
          text="value: {{ scene_dict['name'] }}; align: center"
        ></a-entity>

        <!-- Objects in the scene -->
        {% for object in scene_dict["objects"] %}
        <a-gltf-model
          id="{{ object['id'] }}-obj"
          src="#{{ object['asset_id'] }}-asset-src"
          position="{{ object['position'][0] }} {{ object['position'][1] }} {{ object['position'][2] }}"
          scale="{{ object['scale'][0] }} {{ object['scale'][1] }} {{ object['scale'][2] }}"
          rotation="{{ object['rotation'][0] }} {{ object['rotation'][1] }} {{ object['rotation'][2] }}"
        ></a-gltf-model>
        {% end %}
      </a-scene>
    </div>
  </body>
</html>
